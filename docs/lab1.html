<!DOCTYPE HTML>
<!--
	Escape Velocity by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>Overbuilt and Underpaid</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
        <link rel="stylesheet" href="assets/highlight/styles/monokai.css">
        <script src="assets/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
	</head>
	<body class="homepage">
		<div id="page-wrapper">

			<!-- Header -->
				<div id="header-wrapper" class="wrapper">
					<div id="header">

						<!-- Logo -->
							<div id="logo">
								<h1><a href="index.html">Lab 1: Microcontrollers</a></h1>
								<p>ECE 3400 Team 2 Fall 2017</p>
							</div>

						<!-- Nav -->
							<nav id="nav">
								<ul>
									<li class="current"><a href="index.html">Home</a></li>
									<li>
										<a href="#">Labs</a>
										<ul>
											<li><a href="lab1.html">Lab 1</a></li>
											<li><a href="lab2.html">Lab 2</a></li>
										</ul>
									</li>
									<li><a href="info.html">Team Info</a></li>
									<li><a href="minutes.html">Meeting Minutes</a></li>
								</ul>
							</nav>

					</div>
				</div>

            <!-- Intro -->
                <div id="intro-wrapper" class="wrapper style1">
                    <div class="title">Introduction</div>
                    <section id="intro" class="container">
                        <header class="style1">
                            <h2>Goal</h2>
                            <p>
                                The main purpose of this lab was to become familiar with the arduino architecture, and
                                learn basic functionality. In particular, we spent a lot of time working with various I/O ports since
                                these are the main way we will send and receive signals to sensors/motors/etc...
                                In this lab, we learned basic functionality of arduino by writing small programs to control LEDs and servos. 
                                At the end of this lab we were able to put together the beginnings of our robot which was able to autonomously move in a given direction.
                            </p>
                        </header>
                        <!--<p class="style2"></p>-->
                        <!--<p class="style3"></p>-->
                        <header class="style1">
                            <h2>Procedure</h2>
                            <p>
                                We first split up into two groups of 3 people each. We ensured that each group contained someone knowledgeable
                                of arduino so if the group hit any road blocks, they would be able to assist. Each group progressed through the
                                lab individually as described below.
                            </p>
                        </header>
                        <header class="style1">
                            <h2>Materials Used</h2>
                            <p>
                                <ul>
                                    <li>1 Arduino Uno</li>
                                    <li>1 USB A/B Cable</li>
                                    <li>2 Continuous Rotation Servo</li>
                                    <li>LED</li>
                                    <li>1 Potentiometer</li>
                                    <li>Several Resistors of Varying Resistances</li>
                                    <li>1 Breadboard</li>
                                </ul>
                            </p>
                        </header>
                    </section>
                </div>

			<!-- Main -->
				<div class="wrapper style2">
					<div class="title">Arduino Code (IDE)</div>
					<div id="main" class="container">
                        <p>
                            We began by installing the arduino IDE to be able to program the board. Once the IDE was installed,
                            we opened a new sketch. Within a new sketch, there are two default functions as described below:
                        </p>
                        <ul>
                            <li>
                                <h4><code>void setup() {}</code></h4>
                                <p>
                                    Called at the start of the entire program. Used to initialize any necessary structures
                                    and set up the arduino for the rest of your program. Generally used to setup I/O pins and prepare
                                    for execution
                                </p>
                            </li>
                            <li>
                                <h4><code>void loop() {}</code></h4>
                                <p>
                                    Function which contains the main execution of your code. This function should not return, and should
                                    loop forever. This is where the interesting parts of the code happen.
                                </p>
                            </li>
                        </ul>
                        <p>
                            In addition to these two functions, you can declare any extra helper functions you want. These can then be
                            called from either <code>void setup()</code> or <code>void loop()</code>.
                        </p>
					</div>
				</div>

			<!-- Highlights -->
				<div class="wrapper style3">
					<div class="title">Blink</div>
					<div id="highlights" class="container">
                        <p class="style1">
                            To start programming, we opened one of the default examples included with the arduino IDE. Selecting the
                            Blink sketch from <i>File > Examples > 1.Basics > Blink</i>. Within the IDE, you can compile your code by clicking the
                            checkmark in the top left corner. This converts the sketch into C code, which is then compiled to assembly code to be run
                            on the arduino uno. At this point, any code which contains errors will fail to compile. Once you are ready to run the program
                            on the board, you can select the upload button (arrow next to compile button). This will compile the code and put the program
                            on the uno.
                        </p>
                        <p class="style1">
                            The code will automatically begin running if the board is powered on. If the board loses power, the program will remain in
                            memory, and will run again when the board is turned on. The board can either receive power from a DC power supply (9V battery) or
                            from the programing cable connected to the computer. Once the Blink sketch was downloaded onto the board, the onboard LED would
                            blink every second. Looking at the code for the Blink program, we can see how it operates on the arduino uno.
                        </p>
                        
                        <header class="style1">
                            <h2>Base Code</h2>
                        </header>
                        <pre><code class="cpp">
                            void setup() {
                                // initialize digital pin LED_BUILTIN as an output.
                                pinMode(LED_BUILTIN, OUTPUT);
                            }
                        </code></pre><br />
                        <p>
                            This code tells the arduino that the built in LED should act as an output. This allows you to write voltage values to the LED,
                            and turn it off/on.
                        </p>
                        <pre><code>
                            void loop() {
                                digitalWrite(LED_BUILTIN, HIGH);   // turn the LED on (HIGH is the voltage level)
                                delay(1000);                       // wait for a second
                                digitalWrite(LED_BUILTIN, LOW);    // turn the LED off by making the voltage LOW
                                delay(1000);                       // wait for a second
                            }
                        </code></pre><br />
                        <p>
                            This is the main function which blinks the LED. Because the LED was set as an output pin in the setup function, we are able to write
                            a <code>HIGH</code> or <code>LOW</<code> value to it. These variables are global variable defined for the arduino. They correspond to logical high and
                            low values. In between turning the LED on/off the program waits for 1 second so you can actually see the LED change.

                            The exact specification for these functions can be found in the <a href="https://www.arduino.cc/en/Reference/HomePage">Arduino Reference</a>.
                        </p>
                        
                        <header class="style1">
                            <h2>External LED</h2>
                        </header>
                        <p>
                            In order to modify the code to blink an external LED, we simply have to modify the I/O pin which we write to. Rather than using
                            the global variable <code>LED_BUILTIN</code>, we passed the pin number we wanted to use to the necessary functions. Now, setup and loop
                            functions looked as below:
                        </p>
                        
                        <pre><code>
                            void setup() {
                                // initialize digital pin 11 as an output.
                                pinMode(11, OUTPUT);
                            }

                            void loop() {
                                digitalWrite(11, HIGH);   // turn the LED on (HIGH is the voltage level)
                                delay(1000);                       // wait for a second
                                digitalWrite(11, LOW);    // turn the LED off by making the voltage LOW
                                delay(1000);                       // wait for a second
                            }
                        </code></pre><br />
                        <p>
                            This completed the software necessary to make the system work, but we still had to wire the external LED to the digital pin. In order to prevent the pin
                            from sourcing too much current and possibly ruining the pin, we connected the LED in series with a 300 ohm resistor. The ground connection is then
                            taken from the arduino's ground. This is simply another pin on the board, and is necessary for the voltage on the digital output pin to have any meaning as
                            voltages are always from one location to another. Once we hooked up the entire circuit and downloaded the program to the uno, the external LED blinked every
                            second just like the onboard LED in the prior section.
                        </p>
                        <p>
                            Once we confirmed this worked, we adjusted the code and external circuit to test all of the digital pins on the board. In the code, we had to change
                            the pin number that we set as a digital output and wrote to. In the circuit, we had to change the pin that the LED was connected to to match the one set
                            in code.
                        </p>
                    </div>
                </div>

			<!-- Footer -->
				<div id="footer-wrapper" class="wrapper">
					<div class="title">Analog Pins and Serial Monitor</div>
					<div id="footer" class="container">
						<header class="style1">
							<h2>Analog Input</h2>
						</header>
                        <p>
                            While digital I/O is nice, often times analog inputs are necessary as signals in the real world are analog. The arduino has six analog input
                            pins (A0 -> A5). Since these pins only serve as inputs, they do not need to be configured as an input/output pin like the digital pins in the previous section.
                            In order to provide an analog signal to the arduino uno, we used a potentiometer to produce a varying voltage value.
                            We supplied the potentiometer using Vdd and Ground from the arduino. The third pin of the potentiometer represented the output voltage
                            of a voltage divider. Again, we ran this voltage through a 300 ohm resistor prior to passing it into the analog input pin. This is
                            simply a saftey precaution to ensure the pin does not source too much current.
                        </p>
                        <p>
                            In order to output the analog value to the serial monitor, we had to modify our code slightly as below.
                        </p>
                        <pre><code>
                            void setup() {
                                Serial.begin(9600);
                            }

                            void loop() {
                                val = analogRead(A0);
                                Serial.println(val);
                            }
                        </code></pre><br />
                        <p>
                            In the <code>setup()</code> function, we have to initialize the serial monitor by calling <code>Serial.begin(i)</code>. The value passed to this function is the baudrate
                            to use for the serial monitor. In the loop, we continually read the analog value from pin A0 and print it out to the monitor
                            using <code>Serial.println()</code>. As we adjusted the potentiometer with a screwdriver, we could see the values being ouputed to the serial monitor
                            change.

                            The <code>analogRead()</code> function converts a voltage between 0 and 5 volts to an integer number between 0 and 1023.
                            We then repeated this for all of the analog pins to ensure they worked properly.
                        </p>
                        
                        <header class="style1">
                            <h2>Analog Output</h2>
                        </header>
                        <p>
                            Analog output can be simulated using a pulse-width modulation. This is only possible on certain pins on the arduino uno. In particular, pins 3, 5, 6, 9, 10,
                            and 11 can be used. This allows us to simulate an analog output. To demonstrate this, we used this feature to vary the brightness of
                            an LED. In order to do this, we utilized aspects from the previous lab exercises.

                            First, we used the potentiometer to provide an anolog input to the arduino, and wired an LED to one of the digital output pins which support
                            PWM. Again, we had to slightly modify our code as below.
                        </p>
                        <pre><code>
                            void setup() {
                                Serial.begin(9600);
                                pinMode(3, OUTPUT);
                            }

                            void loop() {
                                val = analogRead(A0);
                                Serial.println(val);
                                analogWrite(3, val / 4);
                            }
                        </code></pre><br />
                        <p>
                            While it is not necessary to use the serial monitor, we left the code in to aid for debugging purposes.
                        </p>
                        <p>
                            One thing to note is the value we read in from the analog pin must be divided by 4 prior to being passed to the output pin. This is becuase the
                            output only takes values between 0 and 255, while the analog input can have a value up to 1023. The way the PWM works is by creating a square wave with
                            varying duty cycle. If the output is 0, then the signal will be always off. If the output is 255, then the signal will be always on.
                        </p>
                        <p>
                            To further understand the changes in the duty cycle, we used an oscilloscope to measure the voltage output.
                            Below are two separate image captures from the oscilloscope. The value being output to the I/O pin is increasing in value.
                            This causes the duty cycle of the wave to increase until, at its maximum value, the signal is always high.
                        </p>
                        
                        <!-- Image -->
						<a href="#" class="image featured">
								<img src="assets/images/Lab1.jpg" alt="" />
						</a>
					</div>
				</div>
                
                <!-- Main -->
				<div class="wrapper style2">
					<div class="title">Servos</div>
					<div id="main" class="container">
                        Now that we understood how to use the pulse width modulation feature, we could program servos to help our robot
                        move throughout the world. Again, this requires some modification to our code. In particular, we have to include a new
                        library which helps us to interface with the servos.<br />
                        <pre><code class="cpp">
                            #include &ltServo.h&gt

                            Servo myservo;

                            void setup() {
                                myservo.attach(3);
                            }

                            void loop() {
                                myservo.write(180);
                            }
                        </code></pre><br />
                        <p>
                            This would cause the servo to run at full speed forward. Because we use continuous motion servos, the parameter passed to
                            the <code>myservo.write()</code> function is the speed of the servo. A value of 0 corresponds to full speed in reverse, 90 is stationary, and 180
                            is full speed forward.
                        </p>
                        <p>
                            We then used a screwdriver to manually alter the potentiometer values in order to control the speed and direction of the servo.
                            This required a similar setup as the one used for the variable brightness LED.
                        </p>
                        <p>
                            Since we had time left in lab, we began to gather materials to start the building of our robot. First, we assembled the base structure
                            which included a chassis to hold the arduino, and two servos connected to wheels.
                        </p>
                        <p>
                            Using our new knowledge of programming servos, we hooked up a 5V battery back to the arduino and programmed our robot to move forwards, backwards or in a circle.
                        </p>

                        <iframe width="560" height="315"
                            src="https://www.youtube.com/embed/onVxR9bHQKk?rel=0"
                            frameborder="0" allowfullscreen>
                        </iframe>
                        
                        <div id="copyright">
                        	<ul>
                        		<li>&copy; Untitled</li><li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                        	</ul>
                        </div>
                    </div>
                </div>

		</div>

		<!-- Scripts -->

			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/skel.min.js"></script>
			<script src="assets/js/skel-viewport.min.js"></script>
			<script src="assets/js/util.js"></script>
			<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
			<script src="assets/js/main.js"></script>

	</body>
</html>