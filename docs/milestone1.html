<!DOCTYPE HTML>
<!--
    Escape Velocity by HTML5 UP
    html5up.net | @ajlkn
    Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
    <head>
        <title>Overbuilt and Underpaid</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
        <link rel="stylesheet" href="assets/css/main.css" />
        <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
        <link rel="stylesheet" href="assets/highlight/styles/atelier-forest-dark.css">
        <script src="assets/highlight/highlight.pack.js"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </head>
    <body class="homepage">
        <div id="page-wrapper">

            <!-- Header -->
                <div id="header-wrapper" class="wrapper">
                    <div id="header">

                        <!-- Logo -->
                            <div id="logo">
                                <h1><a href="index.html">Milestone 1</a></h1>
                                <p>ECE 3400 Team 2 Fall 2017</p>
                            </div>

                        <!-- Nav -->
                            <nav id="nav">
                                <ul>
                                    <li class="current"><a href="index.html">Home</a></li>
                                    <li>
                                        <a href="#">Labs</a>
                                        <ul>
                                            <li><a href="lab1.html">Lab 1</a></li>
                                            <li><a href="lab2.html">Lab 2</a></li>
                                        </ul>
                                    </li>
                                    <li>
                                        <a href="#">Milestones</a>
                                        <ul>
                                            <li><a href="milestone1.html">Milestone 1</a></li>
                                        </ul>
                                    </li>
                                    <li><a href="info.html">Team Info</a></li>
                                    <li><a href="minutes.html">Meeting Minutes</a></li>
                                </ul>
                            </nav>

                    </div>
                </div>

            <!-- Intro -->
                <div id="intro-wrapper" class="wrapper style1">
                    <div class="title">Introduction</div>
                    <section id="intro" class="container">
                        <header class="style1">
                            <h2>Goal</h2>
                            <p>
                                The purpose of this lab was to start integrating sensors that output relevant data for our robot to respond to. 
                                Using line sensors, our goal was to program our robot to follow black lines of tape as well as trace a figure eight on a grid of black tape.
                                In order to implement this functionality, we needed to understand the type of data outputed from the sensors and properly use it to determine
                                whenever our robot was no longer centered on the black line or was crossing an intersection on a grid.
                        </header>
                        <header class="style1">
                            <h2>Materials Used</h2>
                            <p>
                                <ul>
                                    <li>1 Arduino Uno</li>
                                    <li>1 USB A/B Cable</li>
                                    <li>2 Continuous Rotation Servo</li>
                                    <li>4 line sensors</li>
                                    <li>1 9Volt Battery</li>
                                </ul>
                            </p>
                        </header>
                    </section>
                </div>

                <div class="wrapper style2">
                    <div class="title">Robot Design</div>
                    <div id="highlights" class="container">
                        <center>
                            <a href="#">
                                <img src="assets/images/milestone1_robot_front.jpg" alt="" style="width:512px;" />
                            </a>
                        </center>
                        
                        <center>
                            <a href="#">
                                <img src="assets/images/milestone1_robot_side.jpg" alt="" style="width:512px;" />
                            </a>
                        </center>
                        
                        <center>
                            <a href="#">
                                <img src="assets/images/milestone1_robot_top.jpg" alt="" style="width:512px;" />
                            </a>
                        </center>
                        
                        <center>
                            <a href="#">
                                <img src="assets/images/milestone1_line_sensors.jpg" alt="" style="width:512px;" />
                            </a>
                        </center>
                    </div>
                </div>

                <div class="wrapper style3">
                    <div class="title">Code Overview</div>
                    <div id="highlights" class="container">
                        <header class="style1">
                            <h2>Setup</h2>
                            <p class="style1">
                                Desccription of basic line following algorithm
                            </p>
                        </header>
                        <header class="style1">
                            <h2>Figure Eight Algorithm</h2>
                            <p class="style1">
                                The main loop portion of our figure eight code involves a series of turns on the grid. First the robot moves forward until a junction is 
                                detected. Then the robot turns left and moves forward until another junction is detected. This is followed by four right turns and 3 left 
                                turns on the grid. This is repeated with each main loop iteration. To complete this algorithm we needed to implement functions to turn right, turn left, detect junctions, and line follow.
                                In the future we would like to implement this portion of the code using three states: Start, Forward, and Junction. For now we simply have the 
                                figure eight code that makes multiple calls to each function written out in the loop section.
                            </p>
                        </header>
                    </div>
                </div>

                <div id="footer-wrapper" class="wrapper">
                    <div class="title">Individual Functions</div>
                    <div id="footer" class="container">
                        <header class="style1">
                            <h2>Turning</h2>
                        </header>
                        <p>
                            The turn left and turn right functions are written the same way. They set the wheels going in opposite dirctions, then delay for an appropriate
                            amount of time to turn 90 degrees. Since the two servos are mounted opposite each other, we actually need to set them to the same value in order 
                            for the wheels to move in opposite directions. To turn left, they are set to 0, to turn right they are set to 180.
                        <pre><code class="cpp">
                            //Turn Left 90 degrees
                            void turnLeft(){
                                leftWheel.write(0);
                                rightWheel.write(0);
                                delay(630);
                            }
                        </code></pre><br />
                        </p>
                        <header class="style1">
                            <h2>Detect Junctions</h2>
                        </header>
                        <p>
                            This fucntion returns true if a junction is detected and false otherwise. The line sensors output values from 0 to around 1000, representing a
                            grey scale. Numbers closer to 0 are registerring white while numbers closer to 1000 are registerring black. Whenever the two outer sensors both
                            register a high enough value, they are over a black line and a junction is detected.
                        </p>
                        <pre><code class="cpp">
                            //check the line sensors for junctions.
                            bool detectJunction(){
                                //check the Back Right line sensor
                                int BR = analogRead(BRlinepin);
                                //Check the Back Left line sensor
                                int BL = analogRead(BLlinepin);
                                //If they both produce values over 800, return true.
                                if (BL>800 && BR>800){
                                    return true;
                                }
                                else{
                                    return false;
                                }
                            }
                        </code></pre><br />
                        <header class="style1">
                            <h2>Moving Forward</h2>
                        </header>
                        <p>
                            This function moves forward and follows a black line of tape. First the servos are written to their forward moving values (180 for the left wheel and 0 for the right wheel)
                             To do this, if either the middle left or right line sensor shows a value lower than that of a black line, new values are written to the servos. For example, 
                             if the left sensor is too low, then we are vearing to the left. We write 90 to the right wheel (stopping it) so that we turn back towards the right. This function 
                             repeates through the use a while loop until a junction is found, so the servos are rewritten to forward at the beginning of each loop iteration.
                        </p>
                        <pre><code class="cpp">
                            //check sensors to properly follow the line (DOES NOT WORK YET)
                            void moveForward(){
                                leftWheel.write(180);
                                rightWheel.write(0);
                                //Front Right Line Sensor Value
                                int FR = analogRead(FRlinepin);
                                //Front Left Line Sensor Value
                                int FL = analogRead(FLlinepin);

                                Serial.println(FR);
                                //Turn back the other way if either sensor is off the line.
                                if(FL < 750){
                                    right = 90;
                                }
                                else if(FR < 750){
                                    left = 90;
                                }
                                leftWheel.write(left);
                                rightWheel.write(right);
                            }
                        </code></pre><br />
                    </div>
                </div>

        </div>

        <!-- Scripts -->

            <script src="assets/js/jquery.min.js"></script>
            <script src="assets/js/jquery.dropotron.min.js"></script>
            <script src="assets/js/skel.min.js"></script>
            <script src="assets/js/skel-viewport.min.js"></script>
            <script src="assets/js/util.js"></script>
            <!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]-->
            <script src="assets/js/main.js"></script>

    </body>
</html>